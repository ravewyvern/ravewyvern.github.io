<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Character Typer</title>
    <style>
        /* General Body and Font Styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            display: flex;
            justify-content: center;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: #ffffff;
            padding: 25px 40px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        h1, h2 {
            color: #1a2533;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        /* Text Box Styling */
        #textarea-container {
            position: relative;
        }

        #main-textbox {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            resize: vertical;
        }

        #main-textbox:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);
        }

        /* Character List Styling */
        #character-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .char-item {
            display: flex;
            align-items: center;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .char-display {
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            margin-right: 15px;
            padding: 0 10px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }

        .char-display:hover {
            background-color: #e9ecef;
        }

        .char-controls {
            display: flex;
            flex-direction: column;
            gap: 5px;
            flex-grow: 1;
        }

        .char-controls button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.2s;
            position: relative;
        }

        .char-controls button:hover {
            background-color: #0056b3;
        }

        .char-controls button.copied::after {
            content: 'Copied!';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #28a745;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
        }

        .keybind-info {
            font-size: 12px;
            color: #555;
            background-color: #fff;
            padding: 4px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
        }

        /* Suggestions Pop-up Styling */
        #suggestions-popup {
            position: absolute;
            background-color: #333;
            color: white;
            border-radius: 6px;
            padding: 5px;
            display: flex;
            gap: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateY(-110%); /* Position above the cursor */
        }

        #suggestions-popup.hidden {
            display: none;
        }

        .suggestion {
            padding: 2px 8px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
            transition: background-color 0.2s;
        }

        .suggestion:hover {
            background-color: #555;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>type spanish stuff</h1>
    <p>Type in the box below. Use the buttons or your custom keybinds to insert special characters.</p>
    <p>most of the shift keybinds dont work at all this was made in a rush and is very broken</p>

    <div id="textarea-container">
        <textarea id="main-textbox" rows="10" placeholder="Start typing here..."></textarea>
        <div id="suggestions-popup" class="hidden"></div>
    </div>

    <h2>Character Keybinds</h2>
    <div id="character-list"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Define all special characters and their properties
        const characters = [
            { char: 'á', base: 'a', key: 'a', shift: false },
            { char: 'é', base: 'e', key: 'e', shift: false },
            { char: 'í', base: 'i', key: 'i', shift: false },
            { char: 'ó', base: 'o', key: 'o', shift: false },
            { char: 'ú', base: 'u', key: 'u', shift: false },
            { char: 'ü', base: 'u', key: 'v', shift: false },
            { char: 'ñ', base: 'n', key: 'n', shift: false },
            { char: 'Á', base: 'A', key: 'a', shift: true },
            { char: 'É', base: 'E', key: 'e', shift: true },
            { char: 'Í', base: 'I', key: 'i', shift: true },
            { char: 'Ó', base: 'O', key: 'o', shift: true },
            { char: 'Ú', base: 'U', key: 'u', shift: true },
            { char: 'Ü', base: 'U', key: 'v', shift: true },
            { char: 'Ñ', base: 'N', key: 'n', shift: true },
            { char: '¿', base: '?', key: '/', shift: false },
            { char: '¡', base: '!', key: '1', shift: false },
        ];

        const textbox = document.getElementById('main-textbox');
        const characterList = document.getElementById('character-list');
        const suggestionsPopup = document.getElementById('suggestions-popup');

        // Function to insert text at the current cursor position
        const insertAtCursor = (myField, myValue) => {
            if (myField.selectionStart || myField.selectionStart === 0) {
                const startPos = myField.selectionStart;
                const endPos = myField.selectionEnd;
                myField.value = myField.value.substring(0, startPos) + myValue + myField.value.substring(endPos, myField.value.length);
                myField.selectionStart = startPos + myValue.length;
                myField.selectionEnd = startPos + myValue.length;
            } else {
                myField.value += myValue;
            }
            myField.focus();
        };

        // Create and display the list of character controls
        characters.forEach(c => {
            const item = document.createElement('div');
            item.className = 'char-item';

            // Display the character (clickable to insert)
            const charDisplay = document.createElement('span');
            charDisplay.className = 'char-display';
            charDisplay.textContent = c.char;
            charDisplay.addEventListener('click', () => insertAtCursor(textbox, c.char));

            const controls = document.createElement('div');
            controls.className = 'char-controls';

            // "Copy" button
            const copyBtn = document.createElement('button');
            copyBtn.textContent = 'Copy';
            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(c.char).then(() => {
                    copyBtn.classList.add('copied');
                    setTimeout(() => copyBtn.classList.remove('copied'), 1500);
                });
            });

            // Keybind info display
            const keybindInfo = document.createElement('div');
            keybindInfo.className = 'keybind-info';
            const shiftText = c.shift ? 'Shift + ' : '';
            keybindInfo.textContent = `Alt + ${shiftText}${c.key.toUpperCase()}`;

            controls.appendChild(copyBtn);
            controls.appendChild(keybindInfo);
            item.appendChild(charDisplay);
            item.appendChild(controls);
            characterList.appendChild(item);
        });

        // --- KEYBIND HANDLING ---
        textbox.addEventListener('keydown', (e) => {
            if (e.altKey) {
                e.preventDefault(); // Prevent default browser Alt-key behavior
                const isCapsLock = e.getModifierState && e.getModifierState('CapsLock');

                // Find a matching character for the pressed key combination
                const charObj = characters.find(c => c.key === e.key.toLowerCase() && (c.shift === e.shiftKey || c.shift === isCapsLock));

                if (charObj) {
                    insertAtCursor(textbox, charObj.char);
                }
            }
        });

        // --- SUGGESTIONS POP-UP HANDLING ---
        let suggestionTimeout;

        textbox.addEventListener('input', (e) => {
            clearTimeout(suggestionTimeout);
            const lastChar = e.target.value[e.target.selectionStart - 1];

            if (!lastChar || !/^[a-zA-Z]$/.test(lastChar)) {
                hideSuggestions();
                return;
            }

            const relatedChars = characters.filter(c => c.base.toLowerCase() === lastChar.toLowerCase());

            if (relatedChars.length > 0) {
                showSuggestions(lastChar, relatedChars);
            } else {
                hideSuggestions();
            }
        });

        // Hide popup when clicking away
        document.addEventListener('click', (e) => {
            if (e.target !== textbox && !suggestionsPopup.contains(e.target)) {
                hideSuggestions();
            }
        });

        const showSuggestions = (typedChar, suggestions) => {
            suggestionsPopup.innerHTML = '';
            suggestionsPopup.classList.remove('hidden');

            // Filter for correct case
            const isUpperCase = typedChar === typedChar.toUpperCase();
            const filteredSuggestions = suggestions.filter(c => (c.char === c.char.toUpperCase()) === isUpperCase);

            if (filteredSuggestions.length === 0) {
                hideSuggestions();
                return;
            }

            filteredSuggestions.forEach(c => {
                const suggestionEl = document.createElement('span');
                suggestionEl.className = 'suggestion';
                suggestionEl.textContent = c.char;
                suggestionEl.addEventListener('click', () => {
                    const cursorPos = textbox.selectionStart;
                    textbox.value = textbox.value.substring(0, cursorPos - 1) + c.char + textbox.value.substring(cursorPos);
                    textbox.selectionStart = cursorPos;
                    textbox.selectionEnd = cursorPos;
                    hideSuggestions();
                    textbox.focus();
                });
                suggestionsPopup.appendChild(suggestionEl);
            });

            // Position the pop-up (simple version, positions at top of textbox)
            // A more complex version would calculate cursor XY, but this is more reliable.
            suggestionsPopup.style.top = `${textbox.offsetTop - suggestionsPopup.offsetHeight - 5}px`;
            suggestionsPopup.style.left = `${textbox.offsetLeft + textbox.clientWidth / 4}px`; // Centered for simplicity

            // Set a timeout to auto-hide the suggestions
            suggestionTimeout = setTimeout(hideSuggestions, 4000);
        };

        const hideSuggestions = () => {
            if (!suggestionsPopup.classList.contains('hidden')) {
                suggestionsPopup.classList.add('hidden');
            }
        };
    });
</script>
</body>
</html>